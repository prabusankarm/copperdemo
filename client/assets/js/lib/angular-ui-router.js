!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e(t["@uirouter/angularjs"]=t["@uirouter/angularjs"]||{},t.angular)}(this,function($,S){"use strict";function t(r){var t=[].slice.apply(arguments,[1]),n=r.length;return function t(e){return e.length>=n?r.apply(null,e):function(){return t(e.concat([].slice.apply(arguments)))}}(t)}function r(){var r=arguments,n=r.length-1;return function(){for(var t=n,e=r[n].apply(this,arguments);t--;)e=r[t].call(this,e);return e}}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,[].slice.call(arguments).reverse())}var R=function(e){return function(t){return t&&t[e]}},y=t(function(t,e,r){return r&&r[t]===e}),b=function(t){return s.apply(null,t.split(".").map(R))},l=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!r.apply(null,t)}};function e(r,n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,t)&&n.apply(null,t)}}function n(r,n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,t)||n.apply(null,t)}}var c=function(r){return function(t){return t.reduce(function(t,e){return t&&!!r(e)},!0)}},f=function(r){return function(t){return t.reduce(function(t,e){return t||!!r(e)},!1)}},h=function(e){return function(t){return null!=t&&t.constructor===e||t instanceof e}},i=function(e){return function(t){return e===t}},p=function(t){return function(){return t}};function o(e,r){return function(t){return t[e].apply(t,r)}}function d(r){return function(t){for(var e=0;e<r.length;e++)if(r[e][0](t))return r[e][1](t)}}var u=function(){function e(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return e.prototype.matches=function(t){return this.regexp.test("."+t)},e.is=function(t){return!!/[!,*]+/.exec(t)},e.fromString=function(t){return e.is(t)?new e(t):null},e}(),a=function(){function r(t){return r.create(t||{})}return r.create=function(t){t=r.isStateClass(t)?new t:t;var e=J(J(t,r.prototype));return t.$$state=function(){return e},e.self=t,e.__stateObjectCache={nameGlob:u.fromString(e.name)},e},r.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},r.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},r.prototype.root=function(){return this.parent&&this.parent.root()||this},r.prototype.parameters=function(e){return((e=rt(e,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(ht(this.params)).filter(function(t){return!e.matchingKeys||e.matchingKeys.hasOwnProperty(t.id)})},r.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||ct(ht(this.params),y("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},r.prototype.toString=function(){return this.fqn()},r}();a.isStateClass=function(t){return T(t)&&!0===t.__uiRouterState},a.isState=function(t){return k(t.__stateObjectCache)};var v=Object.prototype.toString,m=function(e){return function(t){return typeof t===e}},g=m("undefined"),E=l(g),w=function(t){return null===t},_=n(w,g),T=m("function"),C=m("number"),P=m("string"),k=function(t){return null!==t&&"object"==typeof t},O=Array.isArray,x=function(t){return"[object Date]"===v.call(t)},j=function(t){return"[object RegExp]"===v.call(t)},I=a.isState;function V(t){if(O(t)&&t.length){var e=t.slice(0,-1),r=t.slice(-1);return!(e.filter(l(P)).length||r.filter(l(T)).length)}return T(t)}var A=e(k,s(R("then"),T)),H=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},q={$q:void 0,$injector:void 0},D=("undefined"==typeof window?{}:window).angular||{},N=D.fromJson||JSON.parse.bind(JSON),F=D.toJson||JSON.stringify.bind(JSON),U=D.copy||function(t,e){e&&Object.keys(e).forEach(function(t){return delete e[t]});e||(e={});return M(e,t)},L=D.forEach||function(e,r,t){if(O(e))return e.forEach(r,t);Object.keys(e).forEach(function(t){return r(e[t],t)})},M=Object.assign||Pt,B=D.equals||kt;function G(t){return t}function W(){}function z(e,n,r,t,i){void 0===i&&(i=!1);var o=function(t){return e()[t].bind(r())};return(t=t||Object.keys(e())).reduce(function(t,e){var r;return t[e]=i?(r=e,function(){return n[r]=o(r),n[r].apply(null,arguments)}):o(e),t},n)}var J=function(t,e){return M(Object.create(t),e)},Q=t(K);function K(t,e){return-1!==t.indexOf(e)}var Y=t(Z);function Z(t,e){var r=t.indexOf(e);return 0<=r&&t.splice(r,1),t}var X=t(tt);function tt(t,e){return t.push(e),e}var et=function(e){return e.slice().forEach(function(t){"function"==typeof t&&t(),Y(e,t)})};function rt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.concat({}).reverse(),i=M.apply(null,n);return M({},i,ot(t||{},Object.keys(i)))}var nt=function(t,e){return M(t,e)};function it(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function ot(t,e){var r={};for(var n in t)-1!==e.indexOf(n)&&(r[n]=t[n]);return r}function at(r,t){return Object.keys(r).filter(l(Q(t))).reduce(function(t,e){return t[e]=r[e],t},{})}function ut(t,e){return lt(t,R(e))}function st(t,r){var e=O(t),n=e?[]:{},i=e?function(t){return n.push(t)}:function(t,e){return n[e]=t};return L(t,function(t,e){r(t,e)&&i(t,e)}),n}function ct(t,r){var n;return L(t,function(t,e){n||r(t,e)&&(n=t)}),n}var ft=lt;function lt(t,r){var n=O(t)?[]:{};return L(t,function(t,e){return n[e]=r(t,e)}),n}var ht=function(e){return Object.keys(e).map(function(t){return e[t]})},pt=function(t,e){return t&&e},dt=function(t,e){return t||e},vt=function(t,e){return t.concat(e)},mt=function(t,e){return O(e)?t.concat(e.reduce(mt,[])):yt(t,e)};function yt(t,e){return t.push(e),t}var gt=function(t,e){return Q(t,e)?t:yt(t,e)},wt=function(t){return t.reduce(vt,[])},_t=function(t){return t.reduce(mt,[])},$t=Rt,St=Rt;function Rt(r,n){return void 0===n&&(n="assert failure"),function(t){var e=r(t);if(!e)throw new Error(T(n)?n(t):n);return e}}var bt=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};function Et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];var r,n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),i=[];for(r=0;r<n;r++)switch(t.length){case 1:i.push([t[0][r]]);break;case 2:i.push([t[0][r],t[1][r]]);break;case 3:i.push([t[0][r],t[1][r],t[2][r]]);break;case 4:i.push([t[0][r],t[1][r],t[2][r],t[3][r]]);break;default:i.push(t.map(function(t){return t[r]}))}return i}function Tt(t,e){var r,n;if(O(e)&&(r=e[0],n=e[1]),!P(r))throw new Error("invalid parameters to applyPairs");return t[r]=n,t}function Ct(t){return t.length&&t[t.length-1]||void 0}function Pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n=Object.keys(r),i=0;i<n.length;i++)t[n[i]]=r[n[i]]}return t}function kt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var r=typeof t;if(r!==typeof e||"object"!==r)return!1;var n,i,o=[t,e];if(c(O)(o))return i=e,(n=t).length===i.length&&Et(n,i).reduce(function(t,e){return t&&kt(e[0],e[1])},!0);if(c(x)(o))return t.getTime()===e.getTime();if(c(j)(o))return t.toString()===e.toString();if(c(T)(o))return!0;if([T,O,x,j].map(f).reduce(function(t,e){return t||!!e(o)},!1))return!1;var a,u={};for(a in t){if(!kt(t[a],e[a]))return!1;u[a]=!0}for(a in e)if(!u[a])return!1;return!0}var Ot,xt=function(r,n){return void 0===n&&(n=p(!0)),function(t,e){return n(t)&&n(e)?r(t)-r(e):0}},jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r,n){return t.reduce(function(t,e){return t||e(r,n)},0)}},It=function(t){return t.catch(function(t){return 0})&&t},Vt=function(t){return It(q.$q.reject(t))},At=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&e.shift(),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return-1<e&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();(Ot=$.RejectType||($.RejectType={}))[Ot.SUPERSEDED=2]="SUPERSEDED",Ot[Ot.ABORTED=3]="ABORTED",Ot[Ot.INVALID=4]="INVALID",Ot[Ot.IGNORED=5]="IGNORED",Ot[Ot.ERROR=6]="ERROR";var Ht=0,qt=function(){function n(t,e,r){this.$id=Ht++,this.type=t,this.message=e,this.detail=r}return n.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():Ce(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},n.prototype.toPromise=function(){return M(Vt(this),{_transitionRejection:this})},n.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&h(n)(t._transitionRejection)},n.superseded=function(t,e){var r=new n($.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",t);return e&&e.redirected&&(r.redirected=!0),r},n.redirected=function(t){return n.superseded(t,{redirected:!0})},n.invalid=function(t){return new n($.RejectType.INVALID,"This transition is invalid",t)},n.ignored=function(t){return new n($.RejectType.IGNORED,"The transition was ignored",t)},n.aborted=function(t){return new n($.RejectType.ABORTED,"The transition has been aborted",t)},n.errored=function(t){return new n($.RejectType.ERROR,"The transition errored",t)},n.normalize=function(t){return h(n)(t)?t:n.errored(t)},n}();function Dt(t){return t?"[ui-view#"+t.id+" tag in template from '"+(t.creationContext&&t.creationContext.name||"(root)")+"' state]: fqn: '"+t.fqn+"', name: '"+t.name+"@"+t.creationContext+"')":"ui-view (defunct)"}var Nt;function Ft(t){return C(t)?$.Category[t]:$.Category[$.Category[t]]}(Nt=$.Category||($.Category={}))[Nt.RESOLVE=0]="RESOLVE",Nt[Nt.TRANSITION=1]="TRANSITION",Nt[Nt.HOOK=2]="HOOK",Nt[Nt.UIVIEW=3]="UIVIEW",Nt[Nt.VIEWCONFIG=4]="VIEWCONFIG";var Ut,Lt,Mt=b("$id"),Bt=b("router.$id"),Gt=function(t){return"Transition #"+Mt(t)+"-"+Bt(t)},Wt=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(e,t){var r=this;t.length||(t=Object.keys($.Category).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return $.Category[t]})),t.map(Ft).forEach(function(t){return r._enabled[t]=e})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[Ft(t)]},t.prototype.traceTransitionStart=function(t){this.enabled($.Category.TRANSITION)&&console.log(Gt(t)+": Started  -> "+Ce(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled($.Category.TRANSITION)&&console.log(Gt(t)+": Ignored  <> "+Ce(t))},t.prototype.traceHookInvocation=function(t,e,r){if(this.enabled($.Category.HOOK)){var n=b("traceData.hookType")(r)||"internal",i=b("traceData.context.state.name")(r)||b("traceData.context")(r)||"unknown",o=Re(t.registeredHook.callback);console.log(Gt(e)+":   Hook -> "+n+" context: "+i+", "+_e(200,o))}},t.prototype.traceHookResult=function(t,e,r){this.enabled($.Category.HOOK)&&console.log(Gt(e)+":   <- Hook returned: "+_e(200,Ce(t)))},t.prototype.traceResolvePath=function(t,e,r){this.enabled($.Category.RESOLVE)&&console.log(Gt(r)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled($.Category.RESOLVE)&&console.log(Gt(e)+":               <- Resolved  "+t+" to: "+_e(200,Ce(t.data)))},t.prototype.traceError=function(t,e){this.enabled($.Category.TRANSITION)&&console.log(Gt(e)+": <- Rejected "+Ce(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled($.Category.TRANSITION)&&console.log(Gt(e)+": <- Success  "+Ce(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,r){void 0===r&&(r=""),this.enabled($.Category.UIVIEW)&&console.log("ui-view: "+$e(30,t)+" "+Dt(e)+r)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled($.Category.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled($.Category.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+_e(200,e))},t.prototype.traceViewServiceEvent=function(t,e){var r;this.enabled($.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+("[ViewConfig#"+(r=e).$id+" from '"+(r.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+r.viewDecl.$uiViewName+"@"+r.viewDecl.$uiViewContextAnchor+"'"))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled($.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+Dt(e))},t}(),zt=new Wt;(Ut=$.TransitionHookPhase||($.TransitionHookPhase={}))[Ut.CREATE=0]="CREATE",Ut[Ut.BEFORE=1]="BEFORE",Ut[Ut.RUN=2]="RUN",Ut[Ut.SUCCESS=3]="SUCCESS",Ut[Ut.ERROR=4]="ERROR",(Lt=$.TransitionHookScope||($.TransitionHookScope={}))[Lt.TRANSITION=0]="TRANSITION",Lt[Lt.STATE=1]="STATE";var Jt=function(){function t(t,e,r,n){void 0===n&&(n={}),this._identifier=t,this._definition=e,this._options=n,this._params=r||{}}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+F(this.params())},t}();Jt.isDef=function(t){return t&&t.state&&(P(t.state)||P(t.state.name))};var Qt={current:W,transition:null,traceData:{},bind:null},Kt=function(){function o(t,e,r,n){var i=this;this.transition=t,this.stateContext=e,this.registeredHook=r,this.options=n,this.isSuperseded=function(){return i.type.hookPhase===$.TransitionHookPhase.RUN&&!i.options.transition.isActive()},this.options=rt(n,Qt),this.type=r.eventType}return o.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},o.prototype.invokeHook=function(){var e=this,r=this.registeredHook;if(!r._deregistered){var t=this.getNotCurrentRejection();if(t)return t;var n=this.options;zt.traceHookInvocation(this,this.transition,n);var i=function(t){return r.eventType.getErrorHandler(e)(t)},o=function(t){return r.eventType.getResultHandler(e)(t)};try{var a=r.callback.call(n.bind,e.transition,e.stateContext);return!this.type.synchronous&&A(a)?a.catch(function(t){return qt.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(qt.normalize(t))}}},o.prototype.handleHookResult=function(t){var e=this,r=this.getNotCurrentRejection();return r||(A(t)?t.then(function(t){return e.handleHookResult(t)}):(zt.traceHookResult(t,this.transition,this.options),!1===t?qt.aborted("Hook aborted transition").toPromise():h(Jt)(t)?qt.redirected(t).toPromise():void 0))},o.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?qt.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?qt.aborted().toPromise():this.isSuperseded()?qt.superseded(this.options.current()).toPromise():void 0},o.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(b("traceData.hookType")(t)||"internal")+" context: "+(b("traceData.context.state.name")(t)||b("traceData.context")(t)||"unknown")+", "+_e(200,be(e.callback))},o.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||q.$q.when())},o.invokeHooks=function(t,e){for(var r=0;r<t.length;r++){var n=t[r].invokeHook();if(A(n)){var i=t.slice(r+1);return o.chain(i,n).then(e)}}return e()},o.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},o}();function Yt(t,e){var i=P(e)?[e]:e;return!!(T(i)?i:function(t){for(var e=i,r=0;r<e.length;r++){var n=new u(e[r]);if(n&&n.matches(t.name)||!n&&e[r]===t.name)return!0}return!1})(t)}Kt.HANDLE_RESULT=function(e){return function(t){return e.handleHookResult(t)}},Kt.LOG_REJECTED_RESULT=function(e){return function(t){A(t)&&t.catch(function(t){return e.logError(qt.normalize(t))})}},Kt.LOG_ERROR=function(e){return function(t){return e.logError(t)}},Kt.REJECT_ERROR=function(t){return function(t){return Vt(t)}},Kt.THROW_ERROR=function(t){return function(t){throw t}};var Zt=function(){function t(t,e,r,n,i){void 0===i&&(i={}),this.tranSvc=t,this.eventType=e,this.callback=r,this.matchCriteria=n,this.priority=i.priority||0,this.bind=i.bind||null,this._deregistered=!1}return t.prototype._matchingNodes=function(t,e){if(!0===e)return t;var r=t.filter(function(t){return Yt(t.state,e)});return r.length?r:null},t.prototype._getDefaultMatchCriteria=function(){return lt(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(o){var a=this,u=M(this._getDefaultMatchCriteria(),this.matchCriteria);return ht(this.tranSvc._pluginapi._getPathTypes()).reduce(function(t,e){var r=e.scope===$.TransitionHookScope.STATE,n=o[e.name]||[],i=r?n:[Ct(n)];return t[e.name]=a._matchingNodes(i,u[e.name]),t},{})},t.prototype.matches=function(t){var e=this._getMatchingNodes(t);return ht(e).every(G)?e:null},t}();function Xt(t,i,o){var a=(t._registeredHooks=t._registeredHooks||{})[o.name]=[];function e(t,e,r){void 0===r&&(r={});var n=new Zt(i,o,e,t,r);return a.push(n),function(){n._deregistered=!0,Y(a)(n)}}return t[o.name]=e}var te=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(vt,[]).filter(G)},t.prototype.buildHooks=function(o){var a=this.transition,t=a.treeChanges(),e=this.getMatchingHooks(o,t);if(!e)return[];var u={transition:a,current:a.options().current};return e.map(function(i){return i.matches(t)[o.criteriaMatchPath.name].map(function(t){var e=M({bind:i.bind,traceData:{hookType:o.name,context:t}},u),r=o.criteriaMatchPath.scope===$.TransitionHookScope.STATE?t.state.self:null,n=new Kt(a,r,i,e);return{hook:i,node:t,transitionHook:n}})}).reduce(vt,[]).sort(function(i){void 0===i&&(i=!1);return function(t,e){var r=i?-1:1,n=(t.node.state.path.length-e.node.state.path.length)*r;return 0!==n?n:e.hook.priority-t.hook.priority}}(o.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(e,r){var t=e.hookPhase===$.TransitionHookPhase.CREATE,n=this.transition.router.transitionService;return(t?[n]:[this.transition,n]).map(function(t){return t.getHooks(e.name)}).filter($t(O,"broken event named: "+e.name)).reduce(vt,[]).filter(function(t){return t.matches(r)})},t}();var ee=function(){function t(t){this.pattern=/.*/,this.inherit=!0,M(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new re(this,t)},t}();function re(n,i){var o=this;function a(t){return O(t)?t:E(t)?[t]:[]}function u(r,n){return function(t){if(O(t)&&0===t.length)return t;var e=lt(a(t),r);return!0===n?0===st(e,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===i?t[0]:t;default:return t}}(e)}}function s(o){return function(t,e){var r=a(t),n=a(e);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!o(r[i],n[i]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(t){var e=n[t].bind(n),r="equals"===t?s:u;o[t]=r(e)}),M(this,{dynamic:n.dynamic,name:n.name,pattern:n.pattern,inherit:n.inherit,is:u(n.is.bind(n),!0),$arrayMode:i})}var ne,ie=Object.prototype.hasOwnProperty,oe=function(t){return 0===["value","type","squash","array","dynamic"].filter(ie.bind(t||{})).length};(ne=$.DefType||($.DefType={}))[ne.PATH=0]="PATH",ne[ne.SEARCH=1]="SEARCH",ne[ne.CONFIG=2]="CONFIG";var ae=function(){function n(t,e,r,n,i){e=function(t,e,r,n,i){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+n+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&i.type(t.type))return i.type(t.type);if(e)return e;if(!t.type){var o=r===$.DefType.CONFIG?"any":r===$.DefType.PATH?"path":r===$.DefType.SEARCH?"query":"string";return i.type(o)}return t.type instanceof ee?t.type:i.type(t.type)}(r=function(t){function e(){return t.value}return t=oe(t)&&{value:t}||t,e.__cacheable=!0,M(t,{$$fn:V(t.value)?t.value:e})}(r),e,n,t,i.paramTypes);var o,a,u=(o={array:n===$.DefType.SEARCH&&"auto"},a=t.match(/\[\]$/)?{array:!0}:{},M(o,a,r).array);e=u?e.$asArray(u,n===$.DefType.SEARCH):e;var s,c,f,l,h,p,d,v=void 0!==r.value||n===$.DefType.SEARCH,m=E(r.dynamic)?!!r.dynamic:!!e.dynamic,y=E(r.raw)?!!r.raw:!!e.raw,g=function(t,e,r){var n=t.squash;if(!e||!1===n)return!1;if(!E(n)||null==n)return r;if(!0===n||P(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(r,v,i.defaultSquashPolicy()),w=(c=u,l=g,d=[{from:"",to:(f=v)||c?void 0:""},{from:null,to:f||c?void 0:""}],h=O((s=r).replace)?s.replace:[],P(l)&&h.push({from:l,to:void 0}),p=lt(h,R("from")),st(d,function(t){return-1===p.indexOf(t.from)}).concat(h)),_=E(r.inherit)?!!r.inherit:!!e.inherit;M(this,{id:t,type:e,location:n,isOptional:v,dynamic:m,raw:y,squash:g,replace:w,inherit:_,array:u,config:r})}return n.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},n.prototype.value=function(t){var i=this;return t=function(t){for(var e=0,r=i.replace;e<r.length;e++){var n=r[e];if(n.from===t)return n.to}return t}(t),g(t)?function(){if(i._defaultValueCache)return i._defaultValueCache.defaultValue;if(!q.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=q.$injector.invoke(i.config.$$fn);if(null!=t&&!i.type.is(t))throw new Error("Default value ("+t+") for parameter '"+i.id+"' is not an instance of ParamType ("+i.type.name+")");return i.config.$$fn.__cacheable&&(i._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},n.prototype.isSearch=function(){return this.location===$.DefType.SEARCH},n.prototype.validates=function(t){if((g(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var r=this.type.encode(e);return!(P(r)&&!this.type.pattern.exec(r))},n.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},n.values=function(t,e){void 0===e&&(e={});for(var r={},n=0,i=t;n<i.length;n++){var o=i[n];r[o.id]=o.value(e[o.id])}return r},n.changed=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),t.filter(function(t){return!t.type.equals(e[t.id],r[t.id])})},n.equals=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),0===n.changed(t,e,r).length},n.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(pt,!0)},n}(),ue=function(){function n(t){if(t instanceof n){var e=t;this.state=e.state,this.paramSchema=e.paramSchema.slice(),this.paramValues=M({},e.paramValues),this.resolvables=e.resolvables.slice(),this.views=e.views&&e.views.slice()}else{var r=t;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return n.prototype.applyRawParams=function(n){return this.paramValues=this.paramSchema.reduce(function(t,e){return Tt(t,[(r=e).id,r.value(n[r.id])]);var r},{}),this},n.prototype.parameter=function(t){return ct(this.paramSchema,y("id",t))},n.prototype.equals=function(t,e){var r=this.diff(t,e);return r&&0===r.length},n.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var r=e?e(this):this.paramSchema;return ae.changed(r,this.paramValues,t.paramValues)},n.clone=function(t){return new n(t)},n}(),se=function(){function h(){}return h.makeTargetState=function(t){var e=Ct(t).state;return new Jt(e,e,t.map(R("paramValues")).reduce(nt,{}))},h.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new ue(t).applyRawParams(e)})},h.buildToPath=function(t,e){var r=h.buildPath(e);return e.options().inherit?h.inheritParams(t,r,Object.keys(e.params())):r},h.applyViewConfigs=function(i,o,e){o.filter(function(t){return Q(e,t.state)}).forEach(function(e){var t=ht(e.state.views||{}),r=h.subPath(o,function(t){return t===e}),n=t.map(function(t){return i.createViewConfig(r,t)});e.views=n.reduce(vt,[])})},h.inheritParams=function(s,t,c){void 0===c&&(c=[]);var f=s.map(function(t){return t.paramSchema}).reduce(vt,[]).filter(function(t){return!t.inherit}).map(R("id"));return t.map(function(t){var e=M({},t&&t.paramValues),r=ot(e,c);e=at(e,c);var n,i,o,a=at((n=s,i=t.state,o=ct(n,y("state",i)),M({},o&&o.paramValues)||{}),f),u=M(e,a,r);return new ue(t.state).applyRawParams(u)})},h.treeChanges=function(t,n,e){for(var r,i,o,a,u,s,c=0,f=Math.min(t.length,n.length);c<f&&t[c].state!==e&&(r=t[c],i=n[c],r.equals(i,h.nonDynamicParams));)c++;a=(o=t).slice(0,c),u=o.slice(c);var l=a.map(function(t,e){var r=ue.clone(t);return r.paramValues=n[e].paramValues,r});return s=n.slice(c),{from:o,to:l.concat(s),retained:a,exiting:u,entering:s}},h.matching=function(t,e,i){var o=!1;return Et(t,e).reduce(function(t,e){var r=e[0],n=e[1];return(o=o||!r.equals(n,i))?t:t.concat(r)},[])},h.equals=function(t,e,r){return t.length===e.length&&h.matching(t,e,r).length===t.length},h.subPath=function(t,e){var r=ct(t,e),n=t.indexOf(r);return-1===n?void 0:t.slice(0,n+1)},h}();se.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},se.paramValues=function(t){return t.reduce(function(t,e){return M(t,e.paramValues)},{})};var ce={when:"LAZY",async:"WAIT"},fe=function(){function a(t,e,r,n,i){if(this.resolved=!1,this.promise=void 0,t instanceof a)M(this,t);else if(T(e)){if(null==t||null==t)throw new Error("new Resolvable(): token argument is required");if(!T(e))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=t,this.policy=n,this.resolveFn=e,this.deps=r||[],this.data=i,this.resolved=void 0!==i,this.promise=this.resolved?q.$q.when(this.data):void 0}else if(k(t)&&t.token&&T(t.resolveFn)){var o=t;return new a(o.token,o.resolveFn,o.deps,o.policy,o.data)}}return a.prototype.getPolicy=function(t){var e=this.policy||{},r=t&&t.resolvePolicy||{};return{when:e.when||r.when||ce.when,async:e.async||r.async||ce.async}},a.prototype.resolve=function(e,r){var n=this,t=q.$q,i=e.findNode(this),o=i&&i.state,a="RXWAIT"===this.getPolicy(o).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:G;return this.promise=t.when().then(function(){return t.all(e.getDependencies(n).map(function(t){return t.get(e,r)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(a).then(function(t){return n.data=t,n.resolved=!0,zt.traceResolvableResolved(n,r),n.data})},a.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},a.prototype.toString=function(){return"Resolvable(token: "+Ce(this.token)+", requires: ["+this.deps.map(Ce)+"])"},a.prototype.clone=function(){return new a(this)},a}();fe.fromData=function(t,e){return new fe(t,function(){return e},null,null,e)};var le={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},he=le.when,pe=[he.EAGER,he.LAZY],de=[he.EAGER],ve="Native Injector",me=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(gt,[])},t.prototype.getResolvable=function(e){return Ct(this._path.map(function(t){return t.resolvables}).reduce(vt,[]).filter(function(t){return t.token===e}))},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(se.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var r=ct(this._path,y("state",e)),n=t.map(function(t){return t.token});r.resolvables=r.resolvables.filter(function(t){return-1===n.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,u){var s=this;void 0===t&&(t="LAZY");var c=(Q(pe,t)?t:"LAZY")===le.when.EAGER?de:pe;zt.traceResolvePath(this._path,t,u);var f=function(e,r){return function(t){return Q(e,s.getPolicy(t)[r])}},e=this._path.reduce(function(t,e){var r=e.resolvables.filter(f(c,"when")),n=r.filter(f(["NOWAIT"],"async")),i=r.filter(l(f(["NOWAIT"],"async"))),o=s.subContext(e.state),a=function(e){return e.get(o,u).then(function(t){return{token:e.token,value:t}})};return n.forEach(a),t.concat(i.map(a))},[]);return q.$q.all(e)},t.prototype.injector=function(){return this._injector||(this._injector=new ye(this))},t.prototype.findNode=function(e){return ct(this._path,function(t){return Q(t.resolvables,e)})},t.prototype.getDependencies=function(e){var n=this,r=this.findNode(e),i=(se.subPath(this._path,function(t){return t===r})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(t){return t!==e});return e.deps.map(function(e){var t=i.filter(function(t){return t.token===e});if(t.length)return Ct(t);var r=n.injector().getNative(e);if(!r)throw new Error("Could not find Dependency Injection token: "+Ce(e));return new fe(e,function(){return r},[],r)})},t}(),ye=function(){function t(t){this.context=t,this.native=this.get(ve)||q.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+Ce(e.token));return e.data}return this.native&&this.native.get(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):q.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}(),ge=R("self"),we=function(){function e(t,e,r){var n=this;if(this._deferred=q.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new te(this),this.isActive=function(){return n.router.globals.transition===n},this.router=r,!(this._targetState=e).valid())throw new Error(e.error());this._options=M({current:p(this)},e.options()),this.$id=r.transitionService._transitionCount++;var i=se.buildToPath(t,e);this._treeChanges=se.treeChanges(t,i,this._options.reloadState),this.createTransitionHookRegFns();var o=this._hookBuilder.buildHooksForPhase($.TransitionHookPhase.CREATE);Kt.invokeHooks(o,function(){return null}),this.applyViewConfigs(r)}return e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==$.TransitionHookPhase.CREATE}).forEach(function(t){return Xt(e,e.router.transitionService,t)})},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});se.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},e.prototype.$from=function(){return Ct(this._treeChanges.from).state},e.prototype.$to=function(){return Ct(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!Yt(this.$to(),t.to)||t.from&&!Yt(this.$from(),t.from))},e.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(R("paramValues")).reduce(nt,{}))},e.prototype.injector=function(e,t){void 0===t&&(t="to");var r=this._treeChanges[t];return e&&(r=se.subPath(r,function(t){return t.state===e||t.state.name===e})),new me(r).injector()},e.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new me(this._treeChanges[t]).getTokens()},e.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=h(fe)(t)?t:new fe(t);var r="string"==typeof e?e:e.name,n=this._treeChanges.to,i=ct(n,function(t){return t.state.name===r});new me(n).addResolvables([t],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return lt(this._treeChanges.entering,R("state")).map(ge)},e.prototype.exiting=function(){return lt(this._treeChanges.exiting,R("state")).map(ge).reverse()},e.prototype.retained=function(){return lt(this._treeChanges.retained,R("state")).map(ge)},e.prototype.views=function(t,e){void 0===t&&(t="entering");var r=this._treeChanges[t];return(r=e?r.filter(y("state",e)):r).map(R("views")).filter(G).reduce(vt,[])},e.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},e.prototype.redirect=function(t){for(var e=1,r=this;null!=(r=r.redirectedFrom());)if(20<++e)throw new Error("Too many consecutive Transition redirects (20+)");var n={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(n.location="replace");var i=M({},this.options(),t.options(),n);t=new Jt(t.identifier(),t.$state(),t.params(),i);var o,a=this.router.transitionService.create(this._treeChanges.from,t),u=this._treeChanges.entering,s=a._treeChanges.entering;return se.matching(s,u,se.nonDynamicParams).filter(l((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=u[e].resolvables}),a},e.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!Et(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(dt,!1))){var e=t.to.map(function(t){return t.paramSchema}),r=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})});return Et(e,r[0],r[1]).map(function(t){var e=t[0],r=t[1],n=t[2];return ae.changed(e,r,n)}).reduce(vt,[])}},e.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(dt,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var t=this.router.globals.transition,n=this._options.reloadState,e=function(t,e){if(t.length!==e.length)return!1;var r=se.matching(t,e);return t.length===r.filter(function(t){return!n||!t.state.includes[n.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&e(i.to,r.to)&&e(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&e(r.from,r.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,r=Kt.runAllHooks,n=function(t){return e._hookBuilder.buildHooksForPhase(t)},t=n($.TransitionHookPhase.BEFORE);return Kt.invokeHooks(t,function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),zt.traceTransitionStart(e),q.$q.when(void 0)}).then(function(){var t=n($.TransitionHookPhase.RUN);return Kt.invokeHooks(t,function(){return q.$q.when(void 0)})}).then(function(){zt.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),r(n($.TransitionHookPhase.SUCCESS))},function(t){zt.traceError(t,e),e.success=!1,e._deferred.reject(t),e._error=t,r(n($.TransitionHookPhase.ERROR))}),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){g(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var t=this.$to();return t.self.abstract?"Cannot transition to abstract state '"+t.name+"'":ae.validates(t.parameters(),this.params())?!1===this.success?this._error:void 0:"Param values not valid for state '"+t.name+"'"},e.prototype.toString=function(){var t=this.from(),e=this.to(),r=function(t){return null!==t["#"]&&void 0!==t["#"]?t:at(t,["#"])};return"Transition#"+this.$id+"( '"+(k(t)?t.name:t)+"'"+F(r(this._treeChanges.from.map(R("paramValues")).reduce(nt,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(k(e)?e.name:e)+"'"+F(r(this.params()))+" )"},e}();function _e(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function $e(t,e){for(;e.length<t;)e+=" ";return e}function Se(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function Re(t){var e=be(t),r=e.match(/^(function [^ ]+\([^)]*\))/),n=r?r[1]:e,i=t.name||"";return i&&n.match(/function \(/)?"function "+i+n.substr(9):n}function be(t){var e=O(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}we.diToken=we;var Ee=null,Te=function(t){var e=qt.isRejectionPromise;return(Ee=Ee||d([[l(E),p("undefined")],[w,p("null")],[A,p("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[h(qt),o("toString")],[h(we),o("toString")],[h(fe),o("toString")],[V,Re],[p(!0),G]]))(t)};function Ce(t){var r=[];return JSON.stringify(t,function(t,e){return function(t){if(k(t)){if(-1!==r.indexOf(t))return"[circular ref]";r.push(t)}return Te(t)}(e)}).replace(/\\"/g,'"')}var Pe=function(r){return function(t){if(!t)return["",""];var e=t.indexOf(r);return-1===e?[t,""]:[t.substr(0,e),t.substr(e+1)]}};function ke(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(G)}}function Oe(t,e){return P(Ct(t))&&P(e)?t.slice(0,-1).concat(Ct(t)+e):yt(t,e)}var xe,je=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=ot(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=J(lt(this.defaultTypes,function(t,e){return new ee(M({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,r){if(!E(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new ee(M({name:t},e)),r&&(this.typeQueue.push({name:t,def:r}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");M(this.types[t.name],q.$injector.invoke(t.def))}},t}();xe=function(t){var e=function(t){return null!=t?t.toString():t},r={encode:e,decode:e,is:h(String),pattern:/.*/,equals:function(t,e){return t==e}};return M({},r,t)},M(je.prototype,{string:xe({}),path:xe({pattern:/[^/]*/}),query:xe({}),hash:xe({inherit:!1}),int:xe({decode:function(t){return parseInt(t,10)},is:function(t){return!_(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:xe({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:h(Boolean),pattern:/0|1/}),date:xe({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(r,n){return["getFullYear","getMonth","getDate"].reduce(function(t,e){return t&&r[e]()===n[e]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:xe({encode:F,decode:N,is:h(Object),equals:B,pattern:/[^/]*/}),any:xe({encode:G,decode:G,is:function(){return!0},equals:B})});var Ie=function(){function t(t){void 0===t&&(t={}),M(this,t)}return t.prototype.$inherit=function(t,e,r){var n,i=it(e,r),o={},a=[];for(var u in i)if(i[u]&&i[u].params&&(n=Object.keys(i[u].params)).length)for(var s in n)0<=a.indexOf(n[s])||(a.push(n[s]),o[n[s]]=this[n[s]]);return M({},o,t)},t}();function Ve(t){return t.name}function Ae(t){return t.self.$$state=function(){return t},t.self}function He(t){return t.parent&&t.parent.data&&(t.data=t.self.data=J(t.parent.data,t.data)),t.data}var qe=function(o,a){return function(t){var r=t;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var e=function(t){if(!P(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),n=t.parent,i=e?o.compile(e.val,{params:t.params||{},paramMap:function(t,e){return!1===r.reloadOnSearch&&e&&(t=M(t||{},{dynamic:!0})),t}}):r.url;if(!i)return null;if(!o.isMatcher(i))throw new Error("Invalid url '"+i+"' in state '"+t+"'");return e&&e.root?i:(n&&n.navigable||a()).url.append(i)}};function De(t){return t.parent?t.parent.path.concat(t):[t]}function Ne(t){var e=t.parent?M({},t.parent.includes):{};return e[t.name]=!0,e}function Fe(t){var e,r,n=function(t){return t.provide||t.token},i=d([[R("resolveFn"),function(t){return new fe(n(t),t.resolveFn,t.deps,t.policy)}],[R("useFactory"),function(t){return new fe(n(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[R("useClass"),function(t){return new fe(n(t),function(){return new t.useClass},[],t.policy)}],[R("useValue"),function(t){return new fe(n(t),function(){return t.useValue},[],t.policy,t.useValue)}],[R("useExisting"),function(t){return new fe(n(t),G,[t.useExisting],t.policy)}]]),o=d([[s(R("val"),P),function(t){return new fe(t.token,G,[t.val],t.policy)}],[s(R("val"),O),function(t){return new fe(t.token,Ct(t.val),t.val.slice(0,-1),t.policy)}],[s(R("val"),T),function(t){return new fe(t.token,t.val,(e=t.val,r=q.$injector,e.$inject||r&&r.annotate(e,r.strictDi)||"deferred"),t.policy);var e,r}]]),a=d([[h(fe),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},i],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},i],[function(t){return!!(t&&t.val&&(P(t.val)||O(t.val)||T(t.val)))},o],[p(!0),function(t){throw new Error("Invalid resolve value: "+Ce(t))}]]),u=t.resolve;return(O(u)?u:(e=u,r=t.resolvePolicy||{},Object.keys(e||{}).map(function(t){return{token:t,val:e[t],deps:void 0,policy:r[t]}}))).map(a)}var Ue=function(){function t(e,t){this.matcher=e;var n,r,i=this,o=function(){return e.find("")},a=function(t){return""===t.name};this.builders={name:[Ve],self:[Ae],parent:[function(t){return a(t)?null:e.find(i.parentName(t))||o()}],data:[He],url:[qe(t,o)],navigable:[(r=a,function(t){return!r(t)&&t.url?t:t.parent?t.parent.navigable:null})],params:[(n=t.paramFactory,function(t){var e=t.url&&t.url.parameters({inherit:!1})||[],r=ht(ft(at(t.params||{},e.map(R("id"))),function(t,e){return n.fromConfig(e,null,t)}));return e.concat(r).map(function(t){return[t.id,t]}).reduce(Tt,{})})],views:[],path:[De],includes:[Ne],resolvables:[Fe]}}return t.prototype.builder=function(t,e){var r=this.builders,n=r[t]||[];return P(t)&&!E(e)?1<n.length?n:n[0]:P(t)&&T(e)?(r[t]=n,r[t].push(e),function(){return r[t].splice(r[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,r=this.builders,n=this.parentName(t);if(n&&!e.find(n,void 0,!1))return null;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i].reduce(function(e,r){return function(t){return r(t,e)}},W);t[i]=o(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",r=e.split(".");if(1<r.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return"**"===r.pop()&&r.pop(),r.join(".")}return t.parent?P(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var r=P(t.parent)?t.parent:t.parent.name;return r?r+"."+e:e},t}(),Le=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,r){if(void 0===r&&(r=!0),t||""===t){var n=P(t),i=n?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(n||!(n||o!==t&&o.self!==t)))return o;if(n&&r){var a=ht(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return 1<a.length&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",a.map(function(t){return t.name})),a[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var r=this.find(e),n=t.split("."),i=0,o=n.length,a=r;i<o;i++)if(""!==n[i]||0!==i){if("^"!==n[i])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+r.name+"'");a=a.parent}else a=r;var u=n.slice(i).join(".");return a.name+(a.name&&u?".":"")+u},t}(),Me=function(){function t(t,e,r,n,i){this.$registry=t,this.$urlRouter=e,this.states=r,this.builder=n,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,r=a.create(t),n=r.name;if(!P(n))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(n)||Q(e.map(R("name")),n))throw new Error("State '"+n+"' is already defined");return e.push(r),this.flush(),r},t.prototype.flush=function(){for(var e=this,t=this.queue,r=this.states,n=this.builder,i=[],o=[],a={},u=function(t){return e.states.hasOwnProperty(t)&&e.states[t]};0<t.length;){var s=t.shift(),c=s.name,f=n.build(s),l=o.indexOf(s);if(f){var h=u(c);if(h&&h.name===c)throw new Error("State '"+c+"' is already defined");var p=u(c+".**");p&&this.$registry.deregister(p),r[c]=s,this.attachRoute(s),0<=l&&o.splice(l,1),i.push(s)}else{var d=a[c];if(a[c]=t.length,0<=l&&d===t.length)return t.push(s),r;l<0&&o.push(s),t.push(s)}}return i.length&&this.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))}),r},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),Be=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new Le(this.states),this.builder=new Ue(this.matcher,t.urlMatcherFactory),this.stateQueue=new Me(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var e=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(t){return e.get(t)&&e.deregister(t)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){Y(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var r=this,n=this.get().map(function(t){return t.$$state()}),i=function(e){var t=n.filter(function(t){return-1!==e.indexOf(t.parent)});return 0===t.length?t:t.concat(i(t))},e=i([t]),o=[t].concat(e).reverse();return o.forEach(function(t){var e=r._router.urlRouter;e.rules().filter(y("state",t)).forEach(e.removeRule.bind(e)),delete r.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var r=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",r.map(function(t){return t.self}))}),r},t.prototype.get=function(t,e){var r=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return r.states[t].self});var n=this.matcher.find(t,e);return n&&n.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();function Ge(t,e){var r=["",""],n=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return n;switch(e.squash){case!1:r=["(",")"+(e.isOptional?"?":"")];break;case!0:n=n.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+e.squash+"|",")?"]}return n+r[0]+e.type.pattern.source+r[1]}var We=ke("/"),ze=function(){function m(o,a,t,e){var u=this;this.config=e,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=o,this.config=rt(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:G});for(var r,n,i,s=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=0,l=[],h=function(t){if(!m.nameValidator.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+o+"'");if(ct(u._params,y("id",t)))throw new Error("Duplicate parameter name '"+t+"' in pattern '"+o+"'")},p=function(t,e){var r,n=t[2]||t[3],i=e?t[4]:t[4]||("*"===t[1]?".*":null);return{id:n,regexp:i,cfg:u.config.params[n],segment:o.substring(f,t.index),type:i?a.type(i)||(r=i,J(a.type(e?"query":"path"),{pattern:new RegExp(r,u.config.caseInsensitive?"i":void 0)})):null}};(r=s.exec(o))&&!(0<=(n=p(r,!1)).segment.indexOf("?"));)h(n.id),this._params.push(t.fromPath(n.id,n.type,this.config.paramMap(n.cfg,!1))),this._segments.push(n.segment),l.push([n.segment,Ct(this._params)]),f=s.lastIndex;var d=(i=o.substring(f)).indexOf("?");if(0<=d){var v=i.substring(d);if(i=i.substring(0,d),0<v.length)for(f=0;r=c.exec(v);)h((n=p(r,!0)).id),this._params.push(t.fromSearch(n.id,n.type,this.config.paramMap(n.cfg,!0))),f=s.lastIndex}this._segments.push(i),this._compiled=l.map(function(t){return Ge.apply(null,t)}).concat(Ge(i))}return m.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},m.prototype.isRoot=function(){return this._cache.path[0]===this},m.prototype.toString=function(){return this.pattern},m.prototype.exec=function(t,n,e,r){var i=this;void 0===n&&(n={}),void 0===r&&(r={});var o,a,u,s=(o=this._cache,a="pattern",u=function(){return new RegExp(["^",wt(i._cache.path.map(R("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)},o[a]=o[a]||u()).exec(t);if(!s)return null;var c,f=this.parameters(),l=f.filter(function(t){return!t.isSearch()}),h=f.filter(function(t){return t.isSearch()}),p=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),d={};if(p!==s.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var v=0;v<p;v++){for(var m=l[v],y=s[v+1],g=0;g<m.replace.length;g++)m.replace[g].from===y&&(y=m.replace[g].to);y&&!0===m.array&&(void 0,y=lt(lt((c=function(t){return t.split("").reverse().join("")})(y).split(/-(?!\\)/),c),function(t){return t.replace(/\\-/g,"-")}).reverse()),E(y)&&(y=m.type.decode(y)),d[m.id]=m.value(y)}return h.forEach(function(t){for(var e=n[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===e&&(e=t.replace[r].to);E(e)&&(e=t.type.decode(e)),d[t.id]=t.value(e)}),e&&(d["#"]=e),d},m.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:wt(this._cache.path.map(function(t){return t._params}))},m.prototype.parameter=function(n,t){var i=this;void 0===t&&(t={});var e=this._cache.parent;return function(){for(var t=0,e=i._params;t<e.length;t++){var r=e[t];if(r.id===n)return r}}()||!1!==t.inherit&&e&&e.parameter(n,t)||null},m.prototype.validates=function(n){return n=n||{},this.parameters().filter(function(t){return n.hasOwnProperty(t.id)}).map(function(t){return r=n[(e=t).id],!e||e.validates(r);var e,r}).reduce(pt,!0)},m.prototype.format=function(a){void 0===a&&(a={});var t=this._cache.path,e=t.map(m.pathSegmentsAndParams).reduce(vt,[]).map(function(t){return P(t)?t:n(t)}),r=t.map(m.queryParams).reduce(vt,[]).map(n);if(e.concat(r).filter(function(t){return!1===t.isValid}).length)return null;function n(t){var e=t.value(a[t.id]),r=t.validates(e),n=t.isDefaultValue(e),i=!!n&&t.squash,o=t.type.encode(e);return{param:t,value:e,isValid:r,isDefaultValue:n,squash:i,encoded:o}}var i=e.reduce(function(t,e){if(P(e))return t+e;var r=e.squash,n=e.encoded,i=e.param;return!0===r?t.match(/\/$/)?t.slice(0,-1):t:P(r)?t+r:!1!==r?t:null==n?t:O(n)?t+lt(n,m.encodeDashes).join("-"):i.raw?t+n:t+encodeURIComponent(n)},""),o=r.map(function(t){var e=t.param,r=t.squash,n=t.encoded,i=t.isDefaultValue;if(!(null==n||i&&!1!==r)&&(O(n)||(n=[n]),0!==n.length))return e.raw||(n=lt(n,encodeURIComponent)),n.map(function(t){return e.id+"="+t})}).filter(G).reduce(vt,[]).join("&");return i+(o?"?"+o:"")+(a["#"]?"#"+a["#"]:"")},m.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},m.pathSegmentsAndParams=function(t){return Et(t._segments,t._params.filter(function(t){return t.location===$.DefType.PATH}).concat(void 0)).reduce(vt,[]).filter(function(t){return""!==t&&E(t)})},m.queryParams=function(t){return t._params.filter(function(t){return t.location===$.DefType.SEARCH})},m.compare=function(t,e){var r,n,i=function(t){return t._cache.weights=t._cache.weights||(e=t,e._cache.segments=e._cache.segments||e._cache.path.map(m.pathSegmentsAndParams).reduce(vt,[]).reduce(Oe,[]).map(function(t){return P(t)?We(t):t}).reduce(vt,[])).map(function(t){return"/"===t?1:P(t)?2:t instanceof ae?3:void 0});var e},o=Et(i(t),i(e));for(n=0;n<o.length;n++)if(0!==(r=o[n][0]-o[n][1]))return r;return 0},m}();ze.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;var Je=function(){function t(){var n=this;this.paramTypes=new je,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(t){return M({strict:n._isStrictMode,caseInsensitive:n._isCaseInsensitive},t)},this.paramFactory={fromConfig:function(t,e,r){return new ae(t,e,r,$.DefType.CONFIG,n)},fromPath:function(t,e,r){return new ae(t,e,r,$.DefType.PATH,n)},fromSearch:function(t,e,r){return new ae(t,e,r,$.DefType.SEARCH,n)}},M(this,{UrlMatcher:ze,Param:ae})}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=E(t)?t:this._isCaseInsensitive},t.prototype.strictMode=function(t){return this._isStrictMode=E(t)?t:this._isStrictMode},t.prototype.defaultSquashPolicy=function(t){if(E(t)&&!0!==t&&!1!==t&&!P(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=E(t)?t:this._defaultSquashPolicy},t.prototype.compile=function(t,e){return new ze(t,this.paramTypes,this.paramFactory,this._getConfig(e))},t.prototype.isMatcher=function(r){if(!k(r))return!1;var n=!0;return L(ze.prototype,function(t,e){T(t)&&(n=n&&E(r[e])&&T(r[e]))}),n},t.prototype.type=function(t,e,r){var n=this.paramTypes.type(t,e,r);return E(e)?this:n},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}(),Qe=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var r=this,n=d([[P,function(t){return n(r.compile(t))}],[h(ze),function(t){return r.fromUrlMatcher(t,e)}],[I,function(t){return r.fromState(t,r.router)}],[h(RegExp),function(t){return r.fromRegExp(t,e)}],[T,function(t){return new Ke(t,e)}]]),i=n(t);if(!i)throw new Error("invalid 'what' in when()");return i},t.prototype.fromUrlMatcher=function(r,e){var t=e;P(e)&&(e=this.router.urlMatcherFactory.compile(e)),h(ze)(e)&&(t=function(t){return e.format(t)});var n={urlMatcher:r,matchPriority:function(e){var t=r.parameters().filter(function(t){return t.isOptional});return t.length?t.filter(function(t){return e[t.id]}).length/t.length:1e-6},type:"URLMATCHER"};return M(new Ke(function(t){var e=r.exec(t.path,t.search,t.hash);return r.validates(e)&&e},t),n)},t.prototype.fromState=function(n,i){var t={state:n,type:"STATE"};return M(this.fromUrlMatcher(n.url,function(t){var e=i.stateService,r=i.globals;e.href(n,t)!==e.href(r.current,r.params)&&e.transitionTo(n,t,{inherit:!0,source:"url"})}),t)},t.prototype.fromRegExp=function(e,t){if(e.global||e.sticky)throw new Error("Rule RegExp must not be global or sticky");var r=P(t)?function(r){return t.replace(/\$(\$|\d{1,2})/,function(t,e){return r["$"===e?0:Number(e)]})}:t,n={regexp:e,type:"REGEXP"};return M(new Ke(function(t){return e.exec(t.path)},r),n)},t}();Qe.isUrlRule=function(e){return e&&["type","match","handler"].every(function(t){return E(e[t])})};var Ke=function(t,e){var r=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-r.$id},this.handler=e||G};var Ye,Ze=R("urlMatcher");Ye=jt(xt(s(R("priority"),function(t){return-t})),xt(s(R("type"),function(t){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[t]})),function(t,e){return Ze(t)&&Ze(e)?ze.compare(Ze(t),Ze(e)):0},xt(R("$id"),Q(["REGEXP","RAW","OTHER"])));var Xe=function(){function e(t){this._sortFn=Ye,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=t,this.urlRuleFactory=new Qe(t),z(p(e.prototype),this,p(this))}return e.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},e.prototype.sort=function(t){this._rules.sort(this._sortFn=t||this._sortFn),this._sorted=!0},e.prototype.ensureSorted=function(){this._sorted||this.sort()},e.prototype.match=function(t){var e=this;this.ensureSorted(),t=M({path:"",search:{},hash:""},t);var r=this.rules();this._otherwiseFn&&r.push(this._otherwiseFn);for(var n,i,o,a=0;a<r.length&&(!n||0===this._sortFn(r[a],n.rule));a++){var u=(i=r[a],void 0,(o=i.match(t,e._router))&&{match:o,rule:i,weight:i.matchPriority(o)});n=!n||u&&u.weight>n.weight?u:n}return n},e.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,r=e.urlService,n=e.stateService,i={path:r.path(),search:r.search(),hash:r.hash()},o=this.match(i);d([[P,function(t){return r.url(t,!0)}],[Jt.isDef,function(t){return n.go(t.state,t.params,t.options)}],[h(Jt),function(t){return n.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},e.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},e.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.path():e.path()!==this.location&&e.url(this.location,!0)},e.prototype.push=function(t,e,r){var n=r&&!!r.replace;this._router.urlService.url(t.format(e||{}),n)},e.prototype.href=function(t,e,r){var n=t.format(e);if(null==n)return null;r=r||{absolute:!1};var i,o,a,u,s=this._router.urlService.config,c=s.html5Mode();if(c||null===n||(n="#"+s.hashPrefix()+n),i=n,o=c,a=r.absolute,n="/"===(u=s.baseHref())?i:o?u.slice(0,-1)+i:a?u.slice(1)+i:i,!r.absolute||!n)return n;var f=!c&&n?"/":"",l=s.port();return l=80===l||443===l?"":":"+l,[s.protocol(),"://",s.host(),l,f,n].join("")},e.prototype.rule=function(t){var e=this;if(!Qe.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},e.prototype.removeRule=function(t){Y(this._rules,t)},e.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},e.prototype.otherwise=function(t){var e=tr(t);this._otherwiseFn=this.urlRuleFactory.create(p(!0),e),this._sorted=!1},e.prototype.initial=function(t){var e=tr(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},e.prototype.when=function(t,e,r){var n=this.urlRuleFactory.create(t,e);return E(r&&r.priority)&&(n.priority=r.priority),this.rule(n),n},e.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},e}();function tr(t){if(!(T(t)||P(t)||h(Jt)(t)||Jt.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return T(t)?t:p(t)}var er=function(){function a(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs}}}return a.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},a.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},a.prototype.createViewConfig=function(t,e){var r=this._viewConfigFactories[e.$type];if(!r)throw new Error("ViewService: No view config factory registered for type "+e.$type);var n=r(t,e);return O(n)?n:[n]},a.prototype.deactivateViewConfig=function(t){zt.traceViewServiceEvent("<- Removing",t),Y(this._viewConfigs,t)},a.prototype.activateViewConfig=function(t){zt.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},a.prototype.sync=function(){var n=this,r=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(Tt,{});function i(t){for(var e=t.viewDecl.$context,r=0;++r&&e.parent;)e=e.parent;return r}var o=t(function(t,e,r,n){return e*(t(r)-t(n))});this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(t){var e=n._viewConfigs.filter(a.matches(r,t));return 1<e.length&&e.sort(o(i,-1)),[t,e[0]]}).forEach(function(t){var e=t[0],r=t[1];-1!==n._uiViews.indexOf(e)&&e.configUpdated(r)})},a.prototype.registerUIView=function(e){zt.traceViewServiceUIViewEvent("-> Registering",e);var t=this._uiViews;return t.filter(function(t){return t.fqn===e.fqn}).length&&zt.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",e),t.push(e),this.sync(),function(){-1!==t.indexOf(e)?(zt.traceViewServiceUIViewEvent("<- Deregistering",e),Y(t)(e)):zt.traceViewServiceUIViewEvent("Tried removing non-registered uiView",e)}},a.prototype.available=function(){return this._uiViews.map(R("fqn"))},a.prototype.active=function(){return this._uiViews.filter(R("$config")).map(R("name"))},a.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var r=e.split("@"),n=r[0]||"$default",i=P(r[1])?r[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(n);o&&(i=o[1],n=o[2]),"!"===n.charAt(0)&&(n=n.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:n,uiViewContextAnchor:i}},a}();er.matches=function(u,s){return function(t){if(s.$type!==t.viewDecl.$type)return!1;var e=t.viewDecl,r=e.$uiViewName.split("."),n=s.fqn.split(".");if(!B(r,n.slice(0-r.length)))return!1;var i=1-r.length||void 0,o=n.slice(0,i).join("."),a=u[o].creationContext;return e.$uiViewContextAnchor===(a&&a.name)}};var rr=function(){function t(){this.params=new Ie,this.lastStartedTransitionId=-1,this.transitionHistory=new At([],1),this.successfulTransitions=new At([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),nr=function(t){return t.reduce(function(t,e){return t[e]=H(e),t},{dispose:W})},ir=["url","path","search","hash","onChange"],or=["port","protocol","host","baseHref","html5Mode","hashPrefix"],ar=["type","caseInsensitive","strictMode","defaultSquashPolicy"],ur=["sort","when","initial","otherwise","rules","rule","removeRule"],sr=["deferIntercept","listen","sync","match"],cr=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var r=function(){return t.locationService};z(r,this,r,ir,e);var n=function(){return t.locationConfig};z(n,this.config,n,or,e);var i=function(){return t.urlMatcherFactory};z(i,this.config,i,ar);var o=function(){return t.urlRouter};z(o,this.rules,o,ur),z(o,this,o,sr)}return t.prototype.url=function(t,e,r){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t}();cr.locationServiceStub=nr(ir),cr.locationConfigStub=nr(or);var fr=0,lr=function(){function t(t,e){void 0===t&&(t=cr.locationServiceStub),void 0===e&&(e=cr.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=fr++,this._disposed=!1,this._disposables=[],this.trace=zt,this.viewService=new er,this.transitionService=new Or(this),this.globals=new rr,this.urlMatcherFactory=new Je,this.urlRouter=new Xe(this),this.stateRegistry=new Be(this),this.stateService=new xr(this),this.urlService=new cr(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&T(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),Y(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var r=new t(this,e);if(!r.name)throw new Error("Required property `name` missing on plugin: "+r);return this._disposables.push(r),this._plugins[r.name]=r},t.prototype.getPlugin=function(t){return t?this._plugins[t]:ht(this._plugins)},t}();function hr(e){e.addResolvable({token:lr,deps:[],resolveFn:function(){return e.router},data:e.router},""),e.addResolvable({token:we,deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return e.params()},data:e.params()},""),e.entering().forEach(function(t){e.addResolvable({token:"$state$",deps:[],resolveFn:function(){return t},data:t},t)})}var pr=function(e){var t=e.to().redirectTo;if(t){var r=e.router.stateService;return T(t)?q.$q.when(t(e)).then(n):n(t)}function n(t){if(t)return t instanceof Jt?t:P(t)?r.target(t,e.params(),e.options()):t.state||t.params?r.target(t.state||e.to(),t.params||e.params(),e.options()):void 0}};function dr(r){return function(t,e){return(0,e.$$state()[r])(t,e)}}var vr=dr("onExit"),mr=dr("onRetain"),yr=dr("onEnter"),gr=function(t){return new me(t.treeChanges().to).resolvePath("EAGER",t).then(W)},wr=function(t,e){return new me(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(W)},_r=function(t){var e=q.$q,r=t.views("entering");if(r.length)return e.all(r.map(function(t){return e.when(t.load())})).then(W)},$r=function(t){var e=t.views("entering"),r=t.views("exiting");if(e.length||r.length){var n=t.router.viewService;r.forEach(function(t){return n.deactivateViewConfig(t)}),e.forEach(function(t){return n.activateViewConfig(t)}),n.sync()}},Sr=function(t){var e=t.router.globals,r=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,U(t.params(),e.params)},{priority:1e4}),t.promise.then(r,r)},Rr=function(t){var e=t.options(),r=t.router.stateService,n=t.router.urlRouter;if("url"!==e.source&&e.location&&r.$current.navigable){var i={replace:"replace"===e.location};n.push(r.$current.navigable.url,r.params,i)}n.update(!0)},br=function(a){var u=a.router;var t=a.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(t){return Er(a,t)});return q.$q.all(t).then(function(){if("url"!==a.originalTransition().options().source){var t=a.targetState();return u.stateService.target(t.identifier(),t.params(),t.options())}var e=u.urlService,r=e.match(e.parts()),n=r&&r.rule;if(n&&"STATE"===n.type){var i=n.state,o=r.match;return u.stateService.target(i,o,a.options())}u.urlService.sync()})};function Er(e,r){var n=r.$$state().lazyLoad,t=n._promise;if(!t){t=n._promise=q.$q.when(n(e,r)).then(function(t){t&&Array.isArray(t.states)&&t.states.forEach(function(t){return e.router.stateRegistry.register(t)});return t}).then(function(t){return delete r.lazyLoad,delete r.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,q.$q.reject(t)})}return t}var Tr=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Kt.HANDLE_RESULT),void 0===a&&(a=Kt.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=r,this.criteriaMatchPath=n,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u};function Cr(t){var e=t._ignoredReason();if(e){zt.traceTransitionIgnored(t);var r=t.router.globals.transition;return"SameAsCurrent"===e&&r&&r.abort(),qt.ignored().toPromise()}}function Pr(t){if(!t.valid())throw new Error(t.error())}var kr={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Or=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=z(p(this),{},p(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return t.prototype.onCreate=function(t,e,r){},t.prototype.onBefore=function(t,e,r){},t.prototype.onStart=function(t,e,r){},t.prototype.onExit=function(t,e,r){},t.prototype.onRetain=function(t,e,r){},t.prototype.onEnter=function(t,e,r){},t.prototype.onFinish=function(t,e,r){},t.prototype.onSuccess=function(t,e,r){},t.prototype.onError=function(t,e,r){},t.prototype.dispose=function(t){ht(this._registeredHooks).forEach(function(e){return e.forEach(function(t){t._deregistered=!0,Y(e,t)})})},t.prototype.create=function(t,e){return new we(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=$.TransitionHookPhase,e=Kt,r=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,r.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,r.to),this._defineEvent("onStart",t.RUN,0,r.to),this._defineEvent("onExit",t.RUN,100,r.exiting,!0),this._defineEvent("onRetain",t.RUN,200,r.retained),this._defineEvent("onEnter",t.RUN,300,r.entering),this._defineEvent("onFinish",t.RUN,400,r.to),this._defineEvent("onSuccess",t.SUCCESS,0,r.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,r.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=$.TransitionHookScope.STATE,e=$.TransitionHookScope.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Kt.HANDLE_RESULT),void 0===a&&(a=Kt.REJECT_ERROR),void 0===u&&(u=!1);var s=new Tr(t,e,r,n,i,o,a,u);this._eventTypes.push(s),Xt(this,this,s)},t.prototype._getEvents=function(e){return(E(e)?this._eventTypes.filter(function(t){return t.hookPhase===e}):this._eventTypes.slice()).sort(function(t,e){var r=t.hookPhase-e.hookPhase;return 0===r?t.hookOrder-e.hookOrder:r})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=this.onCreate({},hr),t.ignored=this.onBefore({},Cr,{priority:-9999}),t.invalid=this.onBefore({},Pr,{priority:-1e4}),t.redirectTo=this.onStart({to:function(t){return!!t.redirectTo}},pr),t.onExit=this.onExit({exiting:function(t){return!!t.onExit}},vr),t.onRetain=this.onRetain({retained:function(t){return!!t.onRetain}},mr),t.onEnter=this.onEnter({entering:function(t){return!!t.onEnter}},yr),t.eagerResolve=this.onStart({},gr,{priority:1e3}),t.lazyResolve=this.onEnter({entering:p(!0)},wr,{priority:1e3}),t.loadViews=this.onFinish({},_r),t.activateViews=this.onSuccess({},$r),t.updateGlobals=this.onCreate({},Sr),t.updateUrl=this.onSuccess({},Rr,{priority:9999}),t.lazyLoad=this.onBefore({entering:function(t){return!!t.lazyLoad}},br)},t}(),xr=function(){function r(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof qt?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var e=Object.keys(r.prototype).filter(l(Q(["current","$current","params","transition"])));z(p(r.prototype),this,p(this),e)}return Object.defineProperty(r.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.defaultErrorHandler(W),this.invalidCallbacks=[]},r.prototype._handleInvalidTargetState=function(t,r){var n=this,i=se.makeTargetState(t),e=this.router.globals,o=function(){return e.transitionHistory.peekTail()},a=o(),u=new At(this.invalidCallbacks.slice()),s=new me(t).injector(),c=function(t){if(t instanceof Jt){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?o()!==a?qt.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):qt.invalid(e.error()).toPromise()}};return function e(){var t=u.dequeue();return void 0===t?qt.invalid(r.error()).toPromise():q.$q.when(t(r,i,s)).then(c).then(function(t){return t||e()})}()},r.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){Y(this.invalidCallbacks)(t)}.bind(this)},r.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!E(t)||t,inherit:!1,notify:!1})},r.prototype.go=function(t,e,r){var n=rt(r,{relative:this.$current,inherit:!0},kr);return this.transitionTo(t,e,n)},r.prototype.target=function(t,e,r){if(void 0===r&&(r={}),k(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var n=this.router.stateRegistry;if(r.reloadState=!0===r.reload?n.root():n.matcher.find(r.reload,r.relative),r.reload&&!r.reloadState)throw new Error("No such reload state '"+(P(r.reload)?r.reload:r.reload.name)+"'");var i=n.matcher.find(t,r.relative);return new Jt(t,i,e,r)},r.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new ue(t.router.stateRegistry.root())]},r.prototype.transitionTo=function(t,e,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={});var a=this.router,u=a.globals;r=rt(r,kr);r=M(r,{current:function(){return u.transition}});var n=this.target(t,e,r),i=this.getCurrentPath();if(!n.exists())return this._handleInvalidTargetState(i,n);if(!n.valid())return Vt(n.error());var s=function(i){return function(t){if(t instanceof qt){var e=a.globals.lastStartedTransitionId===i.$id;if(t.type===$.RejectType.IGNORED)return e&&a.urlRouter.update(),q.$q.when(u.current);var r=t.detail;if(t.type===$.RejectType.SUPERSEDED&&t.redirected&&r instanceof Jt){var n=i.redirect(r);return n.run().catch(s(n))}if(t.type===$.RejectType.ABORTED)return e&&a.urlRouter.update(),q.$q.reject(t)}return o.defaultErrorHandler()(t),q.$q.reject(t)}},c=this.router.transitionService.create(i,n),f=c.run().catch(s(c));return It(f),M(f,{transition:c})},r.prototype.is=function(t,e,r){r=rt(r,{relative:this.$current});var n=this.router.stateRegistry.matcher.find(t,r.relative);if(E(n)){if(this.$current!==n)return!1;if(!e)return!0;var i=n.parameters({inherit:!0,matchingKeys:e});return ae.equals(i,ae.values(i,e),this.params)}},r.prototype.includes=function(t,e,r){r=rt(r,{relative:this.$current});var n=P(t)&&u.fromString(t);if(n){if(!n.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,r.relative),o=this.$current.includes;if(E(i)){if(!E(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return ae.equals(a,ae.values(a,e),this.params)}},r.prototype.href=function(t,e,r){r=rt(r,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),e=e||{};var n=this.router.stateRegistry.matcher.find(t,r.relative);if(!E(n))return null;r.inherit&&(e=this.params.$inherit(e,this.$current,n));var i=n&&r.lossy?n.navigable:n;return i&&void 0!==i.url&&null!==i.url?this.router.urlRouter.href(i.url,e,{absolute:r.absolute}):null},r.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},r.prototype.get=function(t,e){var r=this.router.stateRegistry;return 0===arguments.length?r.get():r.get(t,e||this.$current)},r.prototype.lazyLoad=function(t,e){var r=this.get(t);if(!r||!r.lazyLoad)throw new Error("Can not lazy load "+t);var n=this.getCurrentPath(),i=se.makeTargetState(n);return Er(e=e||this.router.transitionService.create(n,i),r)},r}(),jr={when:function(r){return new Promise(function(t,e){return t(r)})},reject:function(r){return new Promise(function(t,e){e(r)})},defer:function(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r},all:function(t){if(O(t))return Promise.all(t);if(k(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return jr.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Ir={},Vr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ar=/([^\s,]+)/g,Hr={get:function(t){return Ir[t]},has:function(t){return null!=Hr.get(t)},invoke:function(t,e,r){var n=M({},Ir,r||{}),i=Hr.annotate(t),o=$t(function(t){return n.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return n[t]});return T(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!V(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(O(t))return t.slice(0,-1);var e=t.toString().replace(Vr,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(Ar)||[]}},qr=function(r){return function(t){if(!t)return["",""];var e=t.indexOf(r);return-1===e?[t,""]:[t.substr(0,e),t.substr(e+1)]}},Dr=qr("#"),Nr=qr("?"),Fr=qr("="),Ur=function(t){return t?t.replace(/^#/,""):""},Lr=function(t,e){var r=e[0],n=e[1];return t.hasOwnProperty(r)?O(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n,t},Mr=function(t){return t.split("&").filter(G).map(Fr).reduce(Lr,{})};function Br(t){var e=function(t){return t||""},r=Dr(t).map(e),n=r[0],i=r[1],o=Nr(n).map(e);return{path:o[0],search:o[1],hash:i,url:t}}var Gr=function(t){var e=t.path(),r=t.search(),n=t.hash(),i=Object.keys(r).map(function(e){var t=r[e];return(O(t)?t:[t]).map(function(t){return e+"="+t})}).reduce(vt,[]).join("&");return e+(i?"?"+i:"")+(n?"#"+n:"")};function Wr(n,i,o,a){return function(t){var e=t.locationService=new o(t),r=t.locationConfig=new a(t,i);return{name:n,service:e,configuration:r,dispose:function(t){t.dispose(e),t.dispose(r)}}}}var zr,Jr,Qr,Kr=function(){function t(t,e){var r=this;this.fireAfterUpdate=e,this._listener=function(e){return r._listeners.forEach(function(t){return t(e)})},this._listeners=[],this.hash=function(){return Br(r._get()).hash},this.path=function(){return Br(r._get()).path},this.search=function(){return Mr(Br(r._get()).search)},this._location=window&&window.location,this._history=window&&window.history}return t.prototype.url=function(t,e){if(void 0===e&&(e=!0),E(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate)){var r=M(new Event("locationchange"),{url:t});this._listeners.forEach(function(t){return t(r)})}return Gr(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return Y(e._listeners,t)}},t.prototype.dispose=function(t){et(this._listeners)},t}(),Yr=(zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}zr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Zr=function(r){function t(t){var e=r.call(this,t,!1)||this;return window.addEventListener("hashchange",e._listener,!1),e}return Yr(t,r),t.prototype._get=function(){return Ur(this._location.hash)},t.prototype._set=function(t,e,r,n){this._location.hash=r},t.prototype.dispose=function(t){r.prototype.dispose.call(this,t),window.removeEventListener("hashchange",this._listener)},t}(Kr),Xr=(Jr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}Jr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),tn=function(e){function t(t){return e.call(this,t,!0)||this}return Xr(t,e),t.prototype._get=function(){return this._url},t.prototype._set=function(t,e,r,n){this._url=r},t}(Kr),en=(Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}Qr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),rn=function(r){function t(t){var e=r.call(this,t,!0)||this;return e._config=t.urlService.config,window.addEventListener("popstate",e._listener,!1),e}return en(t,r),t.prototype._get=function(){var t=this._location,e=t.pathname,r=t.hash,n=t.search;return e+((n=Nr(n)[1])?"?"+n:"")+((r=Dr(r)[1])?"$"+n:"")},t.prototype._set=function(t,e,r,n){var i=this._config,o=this._history,a=i.baseHref()+r;n?o.replaceState(t,e,a):o.pushState(t,e,a)},t.prototype.dispose=function(t){r.prototype.dispose.call(this,t),window.removeEventListener("popstate",this._listener)},t}(Kr),nn=function(){var e=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return e._port},this.protocol=function(){return e._protocol},this.host=function(){return e._host},this.baseHref=function(){return e._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(t){return E(t)?e._hashPrefix=t:e._hashPrefix},this.dispose=W},on=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.host},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return E(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return E(t)?this._baseHref=t:this._baseHref||this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base");return this._baseHref=t.length?t[0].href.substr(location.origin.length):""},t.prototype.dispose=function(){},t}();function an(t){return q.$injector=Hr,{name:"vanilla.services",$q:q.$q=jr,$injector:Hr,dispose:function(){return null}}}var un=Wr("vanilla.hashBangLocation",!1,Zr,on),sn=Wr("vanilla.pushStateLocation",!0,rn,on),cn=Wr("vanilla.memoryLocation",!1,tn,nn),fn=function(){function t(){}return t.prototype.dispose=function(t){},t}(),ln=Object.freeze({fromJson:N,toJson:F,copy:U,forEach:L,extend:M,equals:B,identity:G,noop:W,createProxyFunctions:z,inherit:J,inArray:Q,_inArray:K,removeFrom:Y,_removeFrom:Z,pushTo:X,_pushTo:tt,deregAll:et,defaults:rt,mergeR:nt,ancestors:it,pick:ot,omit:at,pluck:ut,filter:st,find:ct,mapObj:ft,map:lt,values:ht,allTrueR:pt,anyTrueR:dt,unnestR:vt,flattenR:mt,pushR:yt,uniqR:gt,unnest:wt,flatten:_t,assertPredicate:$t,assertMap:St,assertFn:Rt,pairs:bt,arrayTuples:Et,applyPairs:Tt,tail:Ct,_extend:Pt,sortBy:xt,composeSort:jt,silenceUncaughtInPromise:It,silentRejection:Vt,notImplemented:H,services:q,Glob:u,curry:t,compose:r,pipe:s,prop:R,propEq:y,parse:b,not:l,and:e,or:n,all:c,any:f,is:h,eq:i,val:p,invoke:o,pattern:d,isUndefined:g,isDefined:E,isNull:w,isNullOrUndefined:_,isFunction:T,isNumber:C,isString:P,isObject:k,isArray:O,isDate:x,isRegExp:j,isState:I,isInjectable:V,isPromise:A,Queue:At,maxLength:_e,padString:$e,kebobString:Se,functionToString:Re,fnToString:be,stringify:Ce,beforeAfterSubstr:Pe,splitOnDelim:ke,joinNeighborsR:Oe,get Category(){return $.Category},Trace:Wt,trace:zt,get DefType(){return $.DefType},Param:ae,ParamTypes:je,StateParams:Ie,ParamType:ee,PathNode:ue,PathUtils:se,resolvePolicies:le,defaultResolvePolicy:ce,Resolvable:fe,NATIVE_INJECTOR_TOKEN:ve,ResolveContext:me,resolvablesBuilder:Fe,StateBuilder:Ue,StateObject:a,StateMatcher:Le,StateQueueManager:Me,StateRegistry:Be,StateService:xr,TargetState:Jt,get TransitionHookPhase(){return $.TransitionHookPhase},get TransitionHookScope(){return $.TransitionHookScope},HookBuilder:te,matchState:Yt,RegisteredHook:Zt,makeEvent:Xt,get RejectType(){return $.RejectType},Rejection:qt,Transition:we,TransitionHook:Kt,TransitionEventType:Tr,defaultTransOpts:kr,TransitionService:Or,UrlMatcher:ze,UrlMatcherFactory:Je,UrlRouter:Xe,UrlRuleFactory:Qe,BaseUrlRule:Ke,UrlService:cr,ViewService:er,UIRouterGlobals:rr,UIRouter:lr,$q:jr,$injector:Hr,BaseLocationServices:Kr,HashLocationService:Zr,MemoryLocationService:tn,PushStateLocationService:rn,MemoryLocationConfig:nn,BrowserLocationConfig:on,splitHash:Dr,splitQuery:Nr,splitEqual:Fr,trimHashVal:Ur,keyValsToObjectR:Lr,getParams:Mr,parseUrl:Br,buildUrl:Gr,locationPluginFactory:Wr,servicesPlugin:an,hashLocationPlugin:un,pushStateLocationPlugin:sn,memoryLocationPlugin:cn,UIRouterPluginBase:fn}),hn=angular,pn=S&&S.module?S:hn;function dn(){var r=null;return function(t,e){return r=r||q.$injector.get("$templateFactory"),[new gn(t,e,r)]}}var vn=function(t,r){return t.reduce(function(t,e){return t||E(r[e])},!1)};function mn(n){if(!n.parent)return{};var i=["component","bindings","componentProvider"],o=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),t=i.concat(o);if(E(n.views)&&vn(t,n))throw new Error("State '"+n.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+t.filter(function(t){return E(n[t])}).join(", "));var a={},e=n.views||{$default:ot(n,t)};return L(e,function(t,e){if(e=e||"$default",P(t)&&(t={component:t}),t=M({},t),vn(i,t)&&vn(o,t))throw new Error("Cannot combine: "+i.join("|")+" with: "+o.join("|")+" in stateview: '"+e+"@"+n.name+"'");t.resolveAs=t.resolveAs||"$resolve",t.$type="ng1",t.$context=n,t.$name=e;var r=er.normalizeUIViewTarget(t.$context,t.$name);t.$uiViewName=r.uiViewName,t.$uiViewContextAnchor=r.uiViewContextAnchor,a[e]=t}),a}var yn=0,gn=function(){function t(t,e,r){var n=this;this.path=t,this.viewDecl=e,this.factory=r,this.$id=yn++,this.loaded=!1,this.getTemplate=function(t,e){return n.component?n.factory.makeComponentTemplate(t,e,n.component,n.viewDecl.bindings):n.template}}return t.prototype.load=function(){var e=this,t=q.$q,r=new me(this.path),n=this.path.reduce(function(t,e){return M(t,e.paramValues)},{}),i={template:t.when(this.factory.fromConfig(this.viewDecl,n,r)),controller:t.when(this.getController(r))};return t.all(i).then(function(t){return zt.traceViewServiceEvent("Loaded",e),e.controller=t.controller,M(e,t.template),e})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!V(e))return this.viewDecl.controller;var r=q.$injector.annotate(e),n=O(e)?Ct(e):e;return new fe("",n,r).get(t)},t}(),wn=function(){function t(){var n=this;this._useHttp=pn.version.minor<3,this.$get=["$http","$templateCache","$injector",function(t,e,r){return n.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),n.$http=t,n.$templateCache=e,n}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var n=function(t){return q.$q.when(t).then(function(t){return{template:t}})},i=function(t){return q.$q.when(t).then(function(t){return{component:t}})};return E(t.template)?n(this.fromString(t.template,e)):E(t.templateUrl)?n(this.fromUrl(t.templateUrl,e)):E(t.templateProvider)?n(this.fromProvider(t.templateProvider,e,r)):E(t.component)?i(t.component):E(t.componentProvider)?i(this.fromComponentProvider(t.componentProvider,e,r)):n("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return T(t)?t(e):t},t.prototype.fromUrl=function(t,e){return T(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var n=q.$injector.annotate(t),i=O(t)?Ct(t):t;return new fe("",i,n).get(r)},t.prototype.fromComponentProvider=function(t,e,r){var n=q.$injector.annotate(t),i=O(t)?Ct(t):t;return new fe("",i,n).get(r)},t.prototype.makeComponentTemplate=function(s,c,t,f){f=f||{};var l=3<=pn.version.minor?"::":"",h=function(t){var e=Se(t);return/^(x|data)-/.exec(e)?"x-"+e:e},e=function(t){var e=q.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(_n).reduce(vt,[])}(t).map(function(t){var e=t.name,r=t.type,n=h(e);if(s.attr(n)&&!f[e])return n+"='"+s.attr(n)+"'";var i=f[e]||e;if("@"===r)return n+"='{{"+l+"$resolve."+i+"}}'";if("&"===r){var o=c.getResolvable(i),a=o&&o.data,u=a&&q.$injector.annotate(a)||[];return n+"='$resolve."+i+(O(a)?"["+(a.length-1)+"]":"")+"("+u.join(",")+")'"}return n+"='"+l+"$resolve."+i+"'"}).join(" "),r=h(t);return"<"+r+" "+e+"></"+r+">"},t}();var _n=function(t){return k(t.bindToController)?$n(t.bindToController):$n(t.scope)},$n=function(e){return Object.keys(e||{}).map(function(t){return[t,/^([=<@&])[?]?(.*)/.exec(e[t])]}).filter(function(t){return E(t)&&O(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},Sn=function(){function r(t,e){this.stateRegistry=t,this.stateService=e,z(p(r.prototype),this,p(this))}return r.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},r.prototype.state=function(t,e){return k(t)?e=t:e.name=t,this.stateRegistry.register(e),this},r.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},r}(),Rn=function(r){return function(t,e){var i=t[r],o="onExit"===r?"from":"to";return i?function(t,e){var r=new me(t.treeChanges(o)),n=M(Fn(r),{$state$:e,$transition$:t});return q.$injector.invoke(i,this,n)}:void 0}},bn=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=p(t);z(e,this,e,["hashPrefix"])}return t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return Y(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=k(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),t&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,n){var i=this;this.$location=e,this.$sniffer=r,t.$on("$locationChangeSuccess",function(e){return i._urlListeners.forEach(function(t){return t(e)})});var o=p(e),a=p(n);z(o,this,o,["replace","path","search","hash"]),z(o,this,o,["port","protocol","host"]),z(a,this,a,["baseHref"])},t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t}(),En=function(){function r(t){this._router=t,this._urlRouter=t.urlRouter}return r.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},r.prototype.rule=function(t){var e=this;if(!T(t))throw new Error("'rule' must be a function");var r=new Ke(function(){return t(q.$injector,e._router.locationService)},G);return this._urlRouter.rule(r),this},r.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(P(t))r.otherwise(t);else{if(!T(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(q.$injector,e._router.locationService)})}return this},r.prototype.when=function(t,e){return(O(e)||T(e))&&(e=r.injectableHandler(this._router,e)),this._urlRouter.when(t,e),this},r.injectableHandler=function(e,r){return function(t){return q.$injector.invoke(r,null,{$match:t,$stateParams:e.globals.params})}},r.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},r}();pn.module("ui.router.angular1",[]);var Tn=pn.module("ui.router.init",[]),Cn=pn.module("ui.router.util",["ng","ui.router.init"]),Pn=pn.module("ui.router.router",["ui.router.util"]),kn=pn.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),On=pn.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),xn=(pn.module("ui.router.compat",["ui.router"]),null);function jn(t){(xn=this.router=new lr).stateProvider=new Sn(xn.stateRegistry,xn.stateService),xn.stateRegistry.decorator("views",mn),xn.stateRegistry.decorator("onExit",Rn("onExit")),xn.stateRegistry.decorator("onRetain",Rn("onRetain")),xn.stateRegistry.decorator("onEnter",Rn("onEnter")),xn.viewService._pluginapi._viewConfigFactory("ng1",dn());var a=xn.locationService=xn.locationConfig=new bn(t);function e(t,e,r,n,i,o){return a._runtimeServices(n,t,r,e),delete xn.router,delete xn.$get,xn}return bn.monkeyPatchPathParameterType(xn),((xn.router=xn).$get=e).$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],xn}jn.$inject=["$locationProvider"];var In=function(r){return["$uiRouterProvider",function(t){var e=t.router[r];return e.$get=function(){return e},e}]};function Vn(e,t,r){q.$injector=e,q.$q=t,r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(vt,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(t){return t.deps=e.annotate(t.resolveFn)})}Vn.$inject=["$injector","$q","$uiRouter"];function An(t){t.$watch(function(){zt.approximateDigests++})}An.$inject=["$rootScope"],Tn.provider("$uiRouter",jn),Pn.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new En(t)}]),Cn.provider("$urlService",In("urlService")),Cn.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return xn.urlMatcherFactory}]),Cn.provider("$templateFactory",function(){return new wn}),kn.provider("$stateRegistry",In("stateRegistry")),kn.provider("$uiRouterGlobals",In("globals")),kn.provider("$transitions",In("transitionService")),kn.provider("$state",["$uiRouterProvider",function(){return M(xn.stateProvider,{$get:function(){return xn.stateService}})}]),kn.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),On.factory("$view",function(){return xn.viewService}),On.service("$trace",function(){return zt}),On.run(An),Cn.run(["$urlMatcherFactory",function(t){}]),kn.run(["$state",function(t){}]),Pn.run(["$urlRouter",function(t){}]),Tn.run(Vn);var Hn,qn,Dn,Nn,Fn=function(r){return r.getTokens().filter(P).map(function(t){var e=r.getResolvable(t);return[t,"NOWAIT"===r.getPolicy(e).async?e.promise:e.data]}).reduce(Tt,{})};function Un(t){var e,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t="("+r[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function Ln(t){var e=t.parent().inheritedData("$uiView"),r=b("$cfg.path")(e);return r?Ct(r).state.name:void 0}function Mn(t,e,r){var n,i=r.uiState||t.current.name,o=M((n=t,{relative:Ln(e)||n.$current,inherit:!0,source:"sref"}),r.uiStateOpts||{}),a=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:a}}function Bn(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function Gn(o,a,u,s,c){return function(t){var e=t.which||t.button,r=c();if(!(1<e||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var n=u(function(){a.go(r.uiState,r.uiStateParams,r.uiStateOpts)});t.preventDefault();var i=s.isAnchor&&!r.href?1:0;t.preventDefault=function(){i--<=0&&u.cancel(n)}}}}function Wn(i,t,o,e){var a;e&&(a=e.events),O(a)||(a=["click"]);for(var r=i.on?"on":"bind",n=0,u=a;n<u.length;n++){var s=u[n];i[r](s,o)}t.$on("$destroy",function(){for(var t=i.off?"off":"unbind",e=0,r=a;e<r.length;e++){var n=r[e];i[t](n,o)}})}function zn(n){var t=function(t,e,r){return n.is(t,e,r)};return t.$stateful=!0,t}function Jn(n){var t=function(t,e,r){return n.includes(t,e,r)};return t.$stateful=!0,t}function Qn(m,y,g,t,w,e){var _=b("viewDecl.controllerAs"),$=b("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(t){var v=t.html();return t.empty(),function(e,r){var t=r.data("$uiView");if(!t)return r.html(v),void m(r.contents())(e);var n=t.$cfg||{viewDecl:{},getTemplate:S.noop},i=n.path&&new me(n.path);r.html(n.getTemplate(r,i)||v),zt.traceUIViewFill(t.$uiView,r.html());var o=m(r.contents()),a=n.controller,u=_(n),s=$(n),c=i&&Fn(i);if(e[s]=c,a){var f=y(a,M({},c,{$scope:e,$element:r}));u&&(e[u]=f,e[u][s]=c),r.data("$ngControllerController",f),r.children().data("$ngControllerController",f),Zn(w,g,f,e,n)}if(P(n.viewDecl.component))var l=n.viewDecl.component,h=Se(l),p=new RegExp("^(x-|data-)?"+h+"$","i"),d=e.$watch(function(){var t=[].slice.call(r[0].children).filter(function(t){return t&&t.tagName&&p.exec(t.tagName)});return t&&pn.element(t).data("$"+l+"Controller")},function(t){t&&(Zn(w,g,t,e,n),d())});o(e)}}}}Hn=["$uiRouter","$timeout",function(h,p){var d=h.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,e,r,n){var i,o=Bn(e),a=n[1]||n[0],u=null,s={},c=function(){return Mn(d,e,s)},f=Un(r.uiSref);function l(){var t=c();u&&u(),a&&(u=a.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&r.$set(o.attr,t.href)}s.uiState=f.state,s.uiStateOpts=r.uiSrefOpts?t.$eval(r.uiSrefOpts):{},f.paramExpr&&(t.$watch(f.paramExpr,function(t){s.uiStateParams=M({},t),l()},!0),s.uiStateParams=M({},t.$eval(f.paramExpr))),l(),t.$on("$destroy",h.stateRegistry.onStatesChanged(l)),t.$on("$destroy",h.transitionService.onSuccess({},l)),o.clickable&&(i=Gn(e,d,p,o,c),Wn(e,t,i,s.uiStateOpts))}}}],qn=["$uiRouter","$timeout",function(p,d){var v=p.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,t,n,e){var i,o=Bn(t),a=e[1]||e[0],u=null,s={},c=function(){return Mn(v,t,s)},f=["uiState","uiStateParams","uiStateOpts"],l=f.reduce(function(t,e){return t[e]=W,t},{});function h(){var t=c();u&&u(),a&&(u=a.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&n.$set(o.attr,t.href)}f.forEach(function(e){s[e]=n[e]?r.$eval(n[e]):null,n.$observe(e,function(t){l[e](),l[e]=r.$watch(t,function(t){s[e]=t,h()},!0)})}),h(),r.$on("$destroy",p.stateRegistry.onStatesChanged(h)),r.$on("$destroy",p.transitionService.onSuccess({},h)),o.clickable&&(i=Gn(t,v,d,o,c),Wn(t,r,i,s.uiStateOpts))}}}],Dn=["$state","$stateParams","$interpolate","$uiRouter",function(l,t,r,a){return{restrict:"A",controller:["$scope","$element","$attrs",function(u,s,t){var c,n,f=[];c=r(t.uiSrefActiveEq||"",!1)(u);try{n=u.$eval(t.uiSrefActive)}catch(t){}function e(t){t.promise.then(o)}function i(t,e,r){var n={state:l.get(t,Ln(s))||{name:t},params:e,activeClass:r};return f.push(n),function(){Y(f)(n)}}function o(){var e=function(t){return t.split(/\s/).filter(G)},t=function(t){return t.map(function(t){return t.activeClass}).map(e).reduce(vt,[])},r=t(f).concat(e(c)).reduce(gt,[]),n=t(f.filter(function(t){return l.includes(t.state.name,t.params)})),i=!!f.filter(function(t){return l.is(t.state.name,t.params)}).length?e(c):[],o=n.concat(i).reduce(gt,[]),a=r.filter(function(t){return!Q(o,t)});u.$evalAsync(function(){o.forEach(function(t){return s.addClass(t)}),a.forEach(function(t){return s.removeClass(t)})})}n=n||r(t.uiSrefActive||"",!1)(u),k(n)&&L(n,function(t,e){if(P(t)){var r=Un(t);i(r.state,u.$eval(r.paramExpr),e)}}),this.$$addStateInfo=function(t,e){if(!(k(n)&&0<f.length)){var r=i(t,e,n);return o(),r}},u.$on("$stateChangeSuccess",o),u.$on("$destroy",a.transitionService.onStart({},e)),a.globals.transition&&e(a.globals.transition),o()}]}}],pn.module("ui.router.state").directive("uiSref",Hn).directive("uiSrefActive",Dn).directive("uiSrefActiveEq",Dn).directive("uiState",qn),zn.$inject=["$state"],Jn.$inject=["$state"],pn.module("ui.router.state").filter("isState",zn).filter("includedByState",Jn),Nn=["$view","$animate","$uiViewScroll","$interpolate","$q",function(i,o,g,w,_){var $={$cfg:{viewDecl:{$context:i._pluginapi._rootViewContext()}},$uiView:{}},S={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,e,y){return function(a,u,t){var s,c,f,e,l=t.onload||"",h=t.autoscroll,p={enter:function(t,e,r){2<pn.version.minor?o.enter(t,null,e).then(r):o.enter(t,null,e,r)},leave:function(t,e){2<pn.version.minor?o.leave(t).then(e):o.leave(t,e)}},d=void 0,r=u.inheritedData("$uiView")||$,v=w(t.uiView||t.name||"")(a)||"$default",m={$type:"ng1",id:S.count++,name:v,fqn:r.$uiView.fqn?r.$uiView.fqn+"."+v:v,config:null,configUpdated:function(t){if(t&&!(t instanceof gn))return;if(e=d,r=t,e===r)return;var e,r;zt.traceUIViewConfigUpdated(m,t&&t.viewDecl&&t.viewDecl.$context),n(d=t)},get creationContext(){var t=b("$cfg.viewDecl.$context")(r),e=b("$uiView.creationContext")(r);return t||e}};function n(t){var e=a.$new(),r=_.defer(),n=_.defer(),i={$cfg:t,$uiView:m},o={$animEnter:r.promise,$animLeave:n.promise,$$animLeave:n};e.$emit("$viewContentLoading",v),c=y(e,function(t){t.data("$uiViewAnim",o),t.data("$uiView",i),p.enter(t,u,function(){r.resolve(),f&&f.$emit("$viewContentAnimationEnded"),(E(h)&&!h||a.$eval(h))&&g(t)}),function(){if(s&&(zt.traceUIViewEvent("Removing (previous) el",s.data("$uiView")),s.remove(),s=null),f&&(zt.traceUIViewEvent("Destroying scope",m),f.$destroy(),f=null),c){var t=c.data("$uiViewAnim");zt.traceUIViewEvent("Animate out",t),p.leave(c,function(){t.$$animLeave.resolve(),s=null}),s=c,c=null}}()}),(f=e).$emit("$viewContentLoaded",t||d),f.$eval(l)}zt.traceUIViewEvent("Linking",m),u.data("$uiView",{$uiView:m}),n(),e=i.registerUIView(m),a.$on("$destroy",function(){zt.traceUIViewEvent("Destroying/Unregistering",m),e()})}}};return S}],Qn.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var Kn="function"==typeof pn.module("ui.router").component,Yn=0;function Zn(n,t,s,e,r){!T(s.$onInit)||r.viewDecl.component&&Kn||s.$onInit();var c=Ct(r.path).state.self,i={bind:s};if(T(s.uiOnParamsChanged)){var f=new me(r.path).getResolvable("$transition$").data;e.$on("$destroy",t.onSuccess({},function(t){if(t!==f&&-1===t.exiting().indexOf(c)){var r=t.params("to"),n=t.params("from"),e=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce(vt,[]),i=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce(vt,[]),o=e.filter(function(t){var e=i.indexOf(t);return-1===e||!i[e].type.equals(r[t.id],n[t.id])});if(o.length){var a=o.map(function(t){return t.id}),u=st(r,function(t,e){return-1!==a.indexOf(e)});s.uiOnParamsChanged(u,t)}}},i))}if(T(s.uiCanExit)){var o=Yn++,a="_uiCanExitIds",u=function(t){return!!t&&(t[a]&&!0===t[a][o]||u(t.redirectedFrom()))},l={exiting:c.name};e.$on("$destroy",t.onBefore(l,function(t){var e,r=t[a]=t[a]||{};return u(t)||(e=n.when(s.uiCanExit(t))).then(function(t){return r[o]=!1!==t}),e},i))}}pn.module("ui.router.state").directive("uiView",Nn),pn.module("ui.router.state").directive("uiView",Qn),pn.module("ui.router.state").provider("$uiViewScroll",function(){var r=!1;this.useAnchorScroll=function(){r=!0},this.$get=["$anchorScroll","$timeout",function(t,e){return r?t:function(t){return e(function(){t[0].scrollIntoView()},0,!1)}}]});$.core=ln,$.default="ui.router",$.fromJson=N,$.toJson=F,$.copy=U,$.forEach=L,$.extend=M,$.equals=B,$.identity=G,$.noop=W,$.createProxyFunctions=z,$.inherit=J,$.inArray=Q,$._inArray=K,$.removeFrom=Y,$._removeFrom=Z,$.pushTo=X,$._pushTo=tt,$.deregAll=et,$.defaults=rt,$.mergeR=nt,$.ancestors=it,$.pick=ot,$.omit=at,$.pluck=ut,$.filter=st,$.find=ct,$.mapObj=ft,$.map=lt,$.values=ht,$.allTrueR=pt,$.anyTrueR=dt,$.unnestR=vt,$.flattenR=mt,$.pushR=yt,$.uniqR=gt,$.unnest=wt,$.flatten=_t,$.assertPredicate=$t,$.assertMap=St,$.assertFn=Rt,$.pairs=bt,$.arrayTuples=Et,$.applyPairs=Tt,$.tail=Ct,$._extend=Pt,$.sortBy=xt,$.composeSort=jt,$.silenceUncaughtInPromise=It,$.silentRejection=Vt,$.notImplemented=H,$.services=q,$.Glob=u,$.curry=t,$.compose=r,$.pipe=s,$.prop=R,$.propEq=y,$.parse=b,$.not=l,$.and=e,$.or=n,$.all=c,$.any=f,$.is=h,$.eq=i,$.val=p,$.invoke=o,$.pattern=d,$.isUndefined=g,$.isDefined=E,$.isNull=w,$.isNullOrUndefined=_,$.isFunction=T,$.isNumber=C,$.isString=P,$.isObject=k,$.isArray=O,$.isDate=x,$.isRegExp=j,$.isState=I,$.isInjectable=V,$.isPromise=A,$.Queue=At,$.maxLength=_e,$.padString=$e,$.kebobString=Se,$.functionToString=Re,$.fnToString=be,$.stringify=Ce,$.beforeAfterSubstr=Pe,$.splitOnDelim=ke,$.joinNeighborsR=Oe,$.Trace=Wt,$.trace=zt,$.Param=ae,$.ParamTypes=je,$.StateParams=Ie,$.ParamType=ee,$.PathNode=ue,$.PathUtils=se,$.resolvePolicies=le,$.defaultResolvePolicy=ce,$.Resolvable=fe,$.NATIVE_INJECTOR_TOKEN=ve,$.ResolveContext=me,$.resolvablesBuilder=Fe,$.StateBuilder=Ue,$.StateObject=a,$.StateMatcher=Le,$.StateQueueManager=Me,$.StateRegistry=Be,$.StateService=xr,$.TargetState=Jt,$.HookBuilder=te,$.matchState=Yt,$.RegisteredHook=Zt,$.makeEvent=Xt,$.Rejection=qt,$.Transition=we,$.TransitionHook=Kt,$.TransitionEventType=Tr,$.defaultTransOpts=kr,$.TransitionService=Or,$.UrlMatcher=ze,$.UrlMatcherFactory=Je,$.UrlRouter=Xe,$.UrlRuleFactory=Qe,$.BaseUrlRule=Ke,$.UrlService=cr,$.ViewService=er,$.UIRouterGlobals=rr,$.UIRouter=lr,$.$q=jr,$.$injector=Hr,$.BaseLocationServices=Kr,$.HashLocationService=Zr,$.MemoryLocationService=tn,$.PushStateLocationService=rn,$.MemoryLocationConfig=nn,$.BrowserLocationConfig=on,$.splitHash=Dr,$.splitQuery=Nr,$.splitEqual=Fr,$.trimHashVal=Ur,$.keyValsToObjectR=Lr,$.getParams=Mr,$.parseUrl=Br,$.buildUrl=Gr,$.locationPluginFactory=Wr,$.servicesPlugin=an,$.hashLocationPlugin=un,$.pushStateLocationPlugin=sn,$.memoryLocationPlugin=cn,$.UIRouterPluginBase=fn,$.watchDigests=An,$.getLocals=Fn,$.getNg1ViewConfigFactory=dn,$.ng1ViewsBuilder=mn,$.Ng1ViewConfig=gn,$.StateProvider=Sn,$.UrlRouterProvider=En,Object.defineProperty($,"__esModule",{value:!0})});